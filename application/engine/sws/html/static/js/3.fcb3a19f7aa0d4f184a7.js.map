{"version":3,"sources":["webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js","webpack:///./src/lib/date.js","webpack:///src/views/admin.vue","webpack:///./src/views/admin.vue?5c30","webpack:///./src/views/admin.vue"],"names":["module","exports","default","__webpack_require__","__esModule","core","$JSON","JSON","stringify","it","apply","arguments","padLeftZero","str","substr","length","admin","name","data","ws","playerPort","timeInvate","users","streamer","manage","mounted","_this","this","WebSocket","location","hostname","port","onmessage","event","msg","parse","type","value","list","forEach","item","time","date","fmt","test","replace","RegExp","$1","getFullYear","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","k","formatDate","Date","push","status","onopen","setInterval","sendMsg","onerror","clearInterval","onclose","router","path","methods","send","stringify_default","kill","confirm","playerId","id","views_admin","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","target","href","_e","_l","key","_s","ip","on","click","$event","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.fcb3a19f7aa0d4f184a7.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 1 3","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 1 3","// date.js\r\nexport function formatDate(date, fmt) {\r\n  if (/(y+)/.test(fmt)) {\r\n    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n  }\r\n  let o = {\r\n    'M+': date.getMonth() + 1,\r\n    'd+': date.getDate(),\r\n    'h+': date.getHours(),\r\n    'm+': date.getMinutes(),\r\n    's+': date.getSeconds()\r\n  };\r\n  for (let k in o) {\r\n    if (new RegExp(`(${k})`).test(fmt)) {\r\n      let str = o[k] + '';\r\n      fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? str : padLeftZero(str));\r\n    }\r\n  }\r\n  return fmt;\r\n}\r\n\r\nfunction padLeftZero(str) {\r\n  return ('00' + str).substr(str.length);\r\n}\r\n\r\nexport function str2Date(dateStr, separator) {\r\n  if (!separator) {\r\n    separator = \"-\";\r\n  }\r\n  let dateArr = dateStr.split(separator);\r\n  let year = parseInt(dateArr[0]);\r\n  let month;\r\n  //处理月份为04这样的情况\r\n  if (dateArr[1].indexOf(\"0\") == 0) {\r\n    month = parseInt(dateArr[1].substring(1));\r\n  } else {\r\n    month = parseInt(dateArr[1]);\r\n  }\r\n  let day = parseInt(dateArr[2]);\r\n  let date = new Date(year, month - 1, day);\r\n  return date;\r\n}\r\n\r\n\r\nexport function getNextMonth(date,fmt) {\r\n  if (/(y+)/.test(fmt)) {\r\n    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n  }\r\n  let o = {\r\n    'M+': date.getMonth() + 2,\r\n    'd+': date.getDate(),\r\n    'h+': date.getHours(),\r\n    'm+': date.getMinutes(),\r\n    's+': date.getSeconds()\r\n  };\r\n  for (let k in o) {\r\n    if (new RegExp(`(${k})`).test(fmt)) {\r\n      let str = o[k] + '';\r\n      fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? str : padLeftZero(str));\r\n    }\r\n  }\r\n  return fmt;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/date.js","<template>\r\n  <div class=\"app-container\">\r\n      <div class=\"data\">\r\n        <div class=\"pack\">\r\n          <span class=\"title\">UE4主机状态</span>\r\n          <span v-if=\"manage\" class=\"circle green\"></span>\r\n          <span v-else class=\"circle red\"></span>\r\n        </div>\r\n        <div class=\"pack\">\r\n          <span class=\"title\">UE4引擎状态</span>\r\n          <span v-if=\"streamer\" class=\"circle green\"></span>\r\n          <span v-else class=\"circle red\"></span>\r\n          <a v-if=\"manage\" class=\"curs\" target=\"_blank\" :href=\"`/demo?port=${playerPort}`\">查看案例</a>\r\n        </div>\r\n        <div class=\"pack user\">\r\n          <div class=\"item\" v-for=\"item in users\" :key=\"item.id\">\r\n            <div class=\"row\">\r\n              <span class=\"key\">客户端编号</span>\r\n              <span class=\"value\">{{item.id}}</span>\r\n            </div>\r\n            <div class=\"row\">\r\n              <span class=\"key\">IP地址</span>\r\n              <span class=\"value\">{{item.ip}}</span>\r\n            </div>\r\n            <div class=\"row\">\r\n              <span class=\"key\">连接时间</span>\r\n              <span class=\"value\">{{item.time}}</span>\r\n            </div>\r\n            <div class=\"tools\"><a class=\"curs\" @click=\"kill(item)\">踢下线</a></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport router from '@/router'\r\nimport {str2Date,formatDate} from \"./../lib/date\";\r\nexport default {\r\n  name: \"admin\",\r\n  data() {\r\n    return {\r\n        ws:null,\r\n        playerPort:null,\r\n        timeInvate:null,\r\n        users:[],\r\n        streamer:null,\r\n        manage:null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.ws=new WebSocket(\"ws://\"+location.hostname+(location.port ? \":\"+location.port : \"\")+\"/ws\");\r\n    this.ws.onmessage= (event) => {\r\n      var msg = JSON.parse(event.data)\r\n      switch (msg.type) {\r\n        case \"playerPort\":\r\n          this.playerPort=msg.value;\r\n          break;\r\n        case 'players':\r\n            this.users=[];\r\n            msg.list.forEach(item=>{\r\n              item.time = formatDate(new Date(item.time),\"hh:mm:ss\")\r\n              this.users.push(item);\r\n            })\r\n          break\r\n        case \"streamer\":\r\n            this.streamer=msg.status;\r\n            break;\r\n        case \"manage\":\r\n            this.manage=msg.status;\r\n            break;\r\n      }\r\n    }\r\n    this.ws.onopen = ()=>{\r\n        this.timeInvate = setInterval(() => {\r\n        this.sendMsg({\r\n          type: 'ping',\r\n        })\r\n      }, 60000)\r\n    }\r\n    this.ws.onerror = (event) => {\r\n        if (this.timeInvate) {\r\n            clearInterval(this.timeInvate)\r\n        }\r\n    }\r\n    this.ws.onclose = (event) => {\r\n        if (this.timeInvate) {\r\n            clearInterval(this.timeInvate)\r\n        }\r\n        router.push({\r\n          path: \"/login\"\r\n        });\r\n    }\r\n  },\r\n  methods: {\r\n      sendMsg(msg){\r\n          this.ws.send(JSON.stringify(msg));\r\n      },\r\n      kill(item){\r\n        if(confirm(\"是否确认将该用户踢下线\")){\r\n          this.sendMsg({\r\n              type:\"kill\",\r\n              playerId:item.id,\r\n          })\r\n        }\r\n      },\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\nbody{\r\n  padding: 0px;\r\n  margin:0px;\r\n}\r\nh1{\r\n  color: #fff;\r\n  font-size: 22px;\r\n  text-align: center;\r\n  line-height: 22px;\r\n}\r\n.app-container{\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(#6586ff, #23ffc2);\r\n}\r\n.data{\r\n  display: grid;\r\n  grid-template-rows:  30px 30px 1fr;\r\n  grid-row-gap: 20px;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 26px;\r\n  box-sizing: border-box;\r\n}\r\n.pack{\r\n  box-sizing: border-box;\r\n  background-color: rgba(0,0,0,0.1);\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.total{\r\n  margin-left: 10px;\r\n  display: block;\r\n  height: 100%;\r\n  width: 400px;\r\n  background-color: #a3a3a3;\r\n  float: left;\r\n}\r\n.total .cur{\r\n  display: block;\r\n  height: 100%;\r\n  background-color: green;\r\n\r\n}\r\n\r\n.title{\r\n  color: #333333;\r\n  font-weight: bold;\r\n  display: block;\r\n  float: left;\r\n  font-size: 20px;\r\n  line-height: 20px;\r\n}\r\n.circle{\r\n  margin-left: 10px;\r\n  float: left;\r\n  display: block;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n}\r\n.green{\r\n  background-color: rgb(0, 255, 0);\r\n}\r\n.red{\r\n  background-color: rgb(255, 0, 0)\r\n}\r\n.curs{\r\n  cursor: pointer;\r\n  margin-left: 15px;\r\n  background-color: #000;\r\n  text-decoration: none;\r\n  color: #fff;\r\n  padding: 4px 8px 4px 8px;\r\n  border-radius: 4px;\r\n  height: 20px;\r\n  -moz-user-select: none; /*火狐*/\r\n  -webkit-user-select: none; /*webkit浏览器*/\r\n  -ms-user-select: none; /*IE10*/\r\n  -khtml-user-select: none; /*早期浏览器*/\r\n  user-select: none;\r\n}\r\n\r\n.curs:active{\r\n  background-color:rgb(50, 50, 50);\r\n}\r\n\r\n.user{\r\n  display: grid;\r\n  grid-template-columns: repeat(5, 1fr);\r\n  grid-template-rows: 100px;\r\n  grid-gap: 5px;\r\n}\r\n.user .item{\r\n  width: 100%;\r\n  height: 100px;\r\n  background-color: rgba(255,255,255,0.2);\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  position: relative;\r\n  -moz-user-select: none; /*火狐*/\r\n  -webkit-user-select: none; /*webkit浏览器*/\r\n  -ms-user-select: none; /*IE10*/\r\n  -khtml-user-select: none; /*早期浏览器*/\r\n  user-select: none;\r\n}\r\n.user .item:hover{\r\n  background-color: rgba(255,255,255,0.3);\r\n}\r\n.user .item .row{\r\n  height: 20px;\r\n  width: 100%;\r\n  font-size: 16px;\r\n  line-height: 20px;\r\n}\r\n\r\n.user .item .row .key{\r\n  display: block;\r\n  float: left;\r\n  width: 50%;\r\n  text-align: left;\r\n}\r\n\r\n.user .item .row .value{\r\n  display: block;\r\n  float: left;\r\n  width: 50%;\r\n  text-align: right;\r\n}\r\n\r\n\r\n.user .item .tools{\r\n  position: absolute;\r\n  bottom: 5px;\r\n  right: 5px;\r\n  height: 20px;\r\n  line-height: 20px;\r\n  font-size: 14px;\r\n  color: #001b7c;\r\n  cursor: pointer;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/admin.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"data\"},[_c('div',{staticClass:\"pack\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"UE4主机状态\")]),_vm._v(\" \"),(_vm.manage)?_c('span',{staticClass:\"circle green\"}):_c('span',{staticClass:\"circle red\"})]),_vm._v(\" \"),_c('div',{staticClass:\"pack\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"UE4引擎状态\")]),_vm._v(\" \"),(_vm.streamer)?_c('span',{staticClass:\"circle green\"}):_c('span',{staticClass:\"circle red\"}),_vm._v(\" \"),(_vm.manage)?_c('a',{staticClass:\"curs\",attrs:{\"target\":\"_blank\",\"href\":(\"/demo?port=\" + _vm.playerPort)}},[_vm._v(\"查看案例\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"pack user\"},_vm._l((_vm.users),function(item){return _c('div',{key:item.id,staticClass:\"item\"},[_c('div',{staticClass:\"row\"},[_c('span',{staticClass:\"key\"},[_vm._v(\"客户端编号\")]),_vm._v(\" \"),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(item.id))])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('span',{staticClass:\"key\"},[_vm._v(\"IP地址\")]),_vm._v(\" \"),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(item.ip))])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('span',{staticClass:\"key\"},[_vm._v(\"连接时间\")]),_vm._v(\" \"),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(item.time))])]),_vm._v(\" \"),_c('div',{staticClass:\"tools\"},[_c('a',{staticClass:\"curs\",on:{\"click\":function($event){return _vm.kill(item)}}},[_vm._v(\"踢下线\")])])])}),0)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-60d9d82e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-60d9d82e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./admin.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./admin.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./admin.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-60d9d82e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./admin.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}