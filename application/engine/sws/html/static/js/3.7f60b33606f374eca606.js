webpackJsonp([3],{mvHQ:function(t,s,e){t.exports={default:e("qkKv"),__esModule:!0}},o3Fh:function(t,s){},qkKv:function(t,s,e){var a=e("FeBl"),n=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},vdJM:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),n=e.n(a),i=e("YaEn");function r(t){return("00"+t).substr(t.length)}var l={name:"admin",data:function(){return{ws:null,playerPort:null,timeInvate:null,users:[],streamer:null,manage:null}},mounted:function(){var t=this;this.ws=new WebSocket("ws://"+location.hostname+(location.port?":"+location.port:"")+"/admin"),this.ws.onmessage=function(s){var e=JSON.parse(s.data);switch(e.type){case"playerPort":t.playerPort=e.value;break;case"players":t.users=[],e.list.forEach(function(s){s.time=function(t,s){/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in e)if(new RegExp("("+a+")").test(s)){var n=e[a]+"";s=s.replace(RegExp.$1,1===RegExp.$1.length?n:r(n))}return s}(new Date(s.time),"hh:mm:ss"),t.users.push(s)});break;case"streamer":t.streamer=e.status;break;case"manage":t.manage=e.status}},this.ws.onopen=function(){t.timeInvate=setInterval(function(){t.sendMsg({type:"ping"})},6e4)},this.ws.onerror=function(s){t.timeInvate&&clearInterval(t.timeInvate)},this.ws.onclose=function(s){t.timeInvate&&clearInterval(t.timeInvate),i.a.push({path:"/login"})}},methods:{sendMsg:function(t){this.ws.send(n()(t))},kill:function(t){confirm("是否确认将该用户踢下线")&&this.sendMsg({type:"kill",playerId:t.id})}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"data"},[e("div",{staticClass:"pack"},[e("span",{staticClass:"title"},[t._v("UE4主机状态")]),t._v(" "),t.manage?e("span",{staticClass:"circle green"}):e("span",{staticClass:"circle red"})]),t._v(" "),e("div",{staticClass:"pack"},[e("span",{staticClass:"title"},[t._v("UE4引擎状态")]),t._v(" "),t.streamer?e("span",{staticClass:"circle green"}):e("span",{staticClass:"circle red"}),t._v(" "),t.manage?e("a",{staticClass:"curs",attrs:{target:"_blank",href:"/demo"}},[t._v("查看案例")]):t._e()]),t._v(" "),e("div",{staticClass:"pack user"},t._l(t.users,function(s){return e("div",{key:s.id,staticClass:"item"},[e("div",{staticClass:"row"},[e("span",{staticClass:"key"},[t._v("客户端编号")]),t._v(" "),e("span",{staticClass:"value"},[t._v(t._s(s.id))])]),t._v(" "),e("div",{staticClass:"row"},[e("span",{staticClass:"key"},[t._v("IP地址")]),t._v(" "),e("span",{staticClass:"value"},[t._v(t._s(s.ip))])]),t._v(" "),e("div",{staticClass:"row"},[e("span",{staticClass:"key"},[t._v("连接时间")]),t._v(" "),e("span",{staticClass:"value"},[t._v(t._s(s.time))])]),t._v(" "),e("div",{staticClass:"tools"},[e("a",{staticClass:"curs",on:{click:function(e){return t.kill(s)}}},[t._v("踢下线")])])])}),0)])])},staticRenderFns:[]};var o=e("VU/8")(l,c,!1,function(t){e("o3Fh")},null,null);s.default=o.exports}});
//# sourceMappingURL=3.7f60b33606f374eca606.js.map